<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to CORTA</title>
    <link rel="stylesheet" href="store.css">
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">
</head>
<body>
<header class="navbar">
    <div class="title">CORTA</div>
    <a href="home.html">Home</a>
    <a href="store.html">Store</a>
    <a href="contact.html">ContactUs</a>
    <a href="news.html">News</a>
    <button class="sign-up"> <a href="signup.html">Sign up</a> </button> 
    <button class="log-in"> <a href="login.html">Log in</a></button>
</header>

<h1>The Boutique</h1>

<div class="image">
    <div class="image1">
        <a href="image1.html">
            <img src="foto1.png" alt="">
        </a>
        <h4>Chic Corduroy Bag</h4>
        <p>$65.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Chic Corduroy Bag">
            <input type="hidden" name="price" value="65.00">
        </form>

        <a href="image2.html">
            <img src="foto2.png" alt="">
        </a>
        <h4>Urban Denim</h4>
        <p>$68.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Urban Denim">
            <input type="hidden" name="price" value="68.00">
        </form>

        <a href="image3.html">
            <img src="foto3.png" alt="">
        </a>
        <h4>Ocean Breeze Linen</h4>
        <p>$76.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Ocean Breeze Linen">
            <input type="hidden" name="price" value="76.00">
        </form>
    </div>

    <div class="image2">
        <a href="image4.html">
            <img src="foto4.png" alt="">
        </a>
        <h4>Canvas Coast</h4>
        <p>$60.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Canvas Coast">
            <input type="hidden" name="price" value="60.00">
        </form>

        <a href="image5.html">
            <img src="foto5.png" alt="">
        </a>
        <h4>Eco Cedar Bag</h4>
        <p>$65.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Eco Cedar Bag">
            <input type="hidden" name="price" value="65.00">
        </form>

        <a href="image6.html">
            <img src="foto6.png" alt="">
        </a>
        <h4>Kyoto Bamboo Bag</h4>
        <p>$65.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Kyoto Bamboo Bag">
            <input type="hidden" name="price" value="65.00">
        </form>
    </div>

    <div class="image3">
        <a href="image7.html">
            <img src="foto7.png" alt="">
        </a>
        <h4>Denim Wanderer</h4>
        <p>$48.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Denim Wanderer">
            <input type="hidden" name="price" value="48.00">
        </form>

        <a href="image8.html">
            <img src="foto8.png" alt="">
        </a>
        <h4>Bamboo Temple</h4>
        <p>$50.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Bamboo Temple">
            <input type="hidden" name="price" value="50.00">
        </form>

        <a href="image9.html">
            <img src="foto9.png" alt="">
        </a>
        <h4>Seaside Linen Bag</h4>
        <p>$70.00</p>
        <form action="manage_purchases.php" method="POST">
            <input type="hidden" name="product_name" value="Seaside Linen Bag">
            <input type="hidden" name="price" value="70.00">
        </form>
    </div>
</div>

<div class="cart">
    <h2>Your Shopping Cart</h2>
    <ul id="cartItems">
        <!-- Cart items will be dynamically inserted here -->
    </ul>
    <form action="manage_purchases.php" method="POST">
        <input type="hidden" name="cartItems" id="cartData">
        <button type="submit">Checkout</button>
    </form>
</div>

<footer class="site-footer">
    <div class="footer">
        <p> Copyright Â© 2024 - 2025 Corta, All Right Reserved.</p>
    </div>
</footer>

<script>
// Initialize cart array in localStorage
if (!localStorage.getItem("cart")) {
    localStorage.setItem("cart", JSON.stringify([]));
}

// Function to update the cart display
function updateCart() {
    let cart = JSON.parse(localStorage.getItem("cart"));
    let cartItems = document.getElementById("cartItems");
    cartItems.innerHTML = ""; // Clear the list first

    cart.forEach(item => {
        let li = document.createElement("li");
        li.textContent = `${item.product_name} - $${item.price} x ${item.quantity}`;
        cartItems.appendChild(li);
    });

    // Save the cart items into the hidden form field to send to manage_purchases.php
    document.getElementById("cartData").value = JSON.stringify(cart);
}

// Add item to cart
document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', function (event) {
        event.preventDefault();

        let product_name = this.querySelector('[name="product_name"]').value;
        let price = this.querySelector('[name="price"]').value;

        let cart = JSON.parse(localStorage.getItem("cart"));
        let productExists = false;

        // Check if product already exists in the cart
        cart.forEach(item => {
            if (item.product_name === product_name) {
                item.quantity++;
                productExists = true;
            }
        });

        // If product doesn't exist, add it to the cart
        if (!productExists) {
            cart.push({ product_name, price, quantity: 1 });
        }

        // Update cart in localStorage
        localStorage.setItem("cart", JSON.stringify(cart));

        // Update the cart display
        updateCart();
    });
});

// Initial cart display
updateCart();
</script>

</body>
</html>